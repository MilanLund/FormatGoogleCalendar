var formatGoogleCalendar=function(){"use strict";var a=function(a){var c=[];jQuery.getJSON(a.calendarUrl,function(f){f.items.forEach(function(a){a&&a.hasOwnProperty("status")&&"cancelled"!==a.status?c.push(a):console.log(a)}),c.sort(b).reverse();var g,h=0,i=0,j=[],k=[],l=[],m=jQuery(a.upcomingSelector),n=jQuery(a.pastSelector);-1===a.pastTopN&&(a.pastTopN=c.length),-1===a.upcomingTopN&&(a.upcomingTopN=c.length),a.past===!1&&(a.pastTopN=0),a.upcoming===!1&&(a.upcomingTopN=0);for(g in c)e(c[g].end.dateTime||c[g].end.date)?h<a.pastTopN&&(j.push(c[g]),h++):l.push(c[g]);l.reverse();for(g in l)i<a.upcomingTopN&&(k.push(l[g]),i++);for(g in j)n.append(d(j[g],a.itemsTagName,a.format));for(g in k)m.append(d(k[g],a.itemsTagName,a.format));0!==m.children().length&&jQuery(a.upcomingHeading).insertBefore(m),0!==n.children().length&&jQuery(a.pastHeading).insertBefore(n)})},b=function(a,b){return new Date(a.start.dateTime||a.start.date).getTime()-new Date(b.start.dateTime||b.start.date).getTime()},c=function(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d},d=function(a,b,c){var d,e=f(a.start.dateTime||a.start.date),g=f(a.end.dateTime||a.end.date),h=l(e,g),i="<"+b+">",j=a.summary||"",k=a.description||"",m=a.location||"";for(d=0;d<c.length;d++)c[d]=c[d].toString(),"*summary*"===c[d]?i=i.concat('<span class="summary">'+j+"</span>"):"*date*"===c[d]?i=i.concat('<span class="date">'+h+"</span>"):"*description*"===c[d]?i=i.concat('<span class="description">'+k+"</span>"):"*location*"===c[d]?i=i.concat('<span class="location">'+m+"</span>"):("*location*"===c[d+1]&&""!==m||"*summary*"===c[d+1]&&""!==j||"*date*"===c[d+1]&&""!==h||"*description*"===c[d+1]&&""!==k)&&(i=i.concat(c[d]));return i+"</"+b+">"},e=function(a){var b=new Date(a),c=new Date;return c.getTime()>b.getTime()?!0:!1},f=function(a){return a=new Date(a),[a.getDate(),a.getMonth(),a.getFullYear()]},g=function(a){var b=["January","February","March","April","May","June","July","August","September","October","November","December"];return b[a]},h=function(a){return g(a[1])+" "+a[0]+", "+a[2]},i=function(a,b){return g(a[1])+" "+a[0]+"-"+b[0]+", "+a[2]},j=function(a,b){return g(a[1])+" "+a[0]+"-"+g(b[1])+" "+b[0]+", "+a[2]},k=function(a,b){return g(a[1])+" "+a[0]+", "+a[2]+"-"+g(b[1])+" "+b[0]+", "+b[2]},l=function(a,b){var c="";return c=a[0]===b[0]?a[1]===b[1]?a[2]===b[2]?h(a):k(a,b):a[2]===b[2]?j(a,b):k(a,b):a[1]===b[1]?a[2]===b[2]?i(a,b):k(a,b):a[2]===b[2]?j(a,b):k(a,b)};return{init:function(b){var d={calendarUrl:"https://www.googleapis.com/calendar/v3/calendars/milan.kacurak@gmail.com/events?key=AIzaSyCR3-ptjHE-_douJsn8o20oRwkxt-zHStY",past:!0,upcoming:!0,pastTopN:-1,upcomingTopN:-1,itemsTagName:"li",upcomingSelector:"#events-upcoming",pastSelector:"#events-past",upcomingHeading:"<h2>Upcoming events</h2>",pastHeading:"<h2>Past events</h2>",format:["*date*",": ","*summary*"," &mdash; ","*description*"," in ","*location*"]};d=c(d,b),a(d)}}}();